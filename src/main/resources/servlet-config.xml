<?xml version="1.0" encoding="UTF-8" ?>

<!--File with configuration of ActionServlet-->

<servlet-config>
    <!--
    <forms> tag contains forms which is needed for corresponding
    bound by name actions. Tags <formName> for mapping to action and
    <type> of Form class are mandatory
    -->
    <forms>
        <form>
            <name>slotSearchForm</name>
            <type>com.saloon.beauty.web.controllers.forms.SlotSearchForm</type>
        </form>
        <form>
            <name>slotIdForm</name>
            <type>com.saloon.beauty.web.controllers.forms.SlotIdForm</type>
        </form>
        <form>
            <name>userLoginForm</name>
            <type>com.saloon.beauty.web.controllers.forms.UserLoginForm</type>
        </form>
        <form>
            <name>userRegistrationForm</name>
            <type>com.saloon.beauty.web.controllers.forms.UserRegistrationForm</type>
        </form>
        <form>
            <name>UserProfileForm</name>
            <type>com.saloon.beauty.web.controllers.forms.UserProfileForm</type>
        </form>
        <form>
            <name>AddFeedbackForm</name>
            <type>com.saloon.beauty.web.controllers.forms.AddFeedbackForm</type>
        </form>
        <form>
            <name>signUpSlotForm</name>
            <type>com.saloon.beauty.web.controllers.forms.SignUpSlotForm</type>
        </form>
        <form>
            <name>feedbackSearchForm</name>
            <type>com.saloon.beauty.web.controllers.forms.FeedbackSearchForm</type>
        </form>
        <form>
            <name>slotForm</name>
            <type>com.saloon.beauty.web.controllers.forms.SlotForm</type>
        </form>
        <form>
            <name>slotUpdateForm</name>
            <type>com.saloon.beauty.web.controllers.forms.SlotUpdateForm</type>
        </form>
        <form>
            <name>addProcedureForm</name>
            <type>com.saloon.beauty.web.controllers.forms.AddProcedureForm</type>
        </form>
        <form>
            <name>procedureIdForm</name>
            <type>com.saloon.beauty.web.controllers.forms.ProcedureIdForm</type>
        </form>
        <form>
            <name>updateProcedureForm</name>
            <type>com.saloon.beauty.web.controllers.forms.UpdateProcedureForm</type>
        </form>
        <form>
            <name>userSearchForm</name>
            <type>com.saloon.beauty.web.controllers.forms.UserSearchForm</type>
        </form>
        <form>
            <name>addUserForm</name>
            <type>com.saloon.beauty.web.controllers.forms.AddUserForm</type>
        </form>
    </forms>

    <!--
    Contains mappings to action depending on request path. Also may contains
     mapping to form and action's dependencies.
     <path> - URL path to action. Mandatory
     <type> - full qualified name of Action class. Mandatory
     <form-name> - mapped name of Form in group <forms>
     <dependency> - action's service dependency need to be injected. Optional
        <class> - full qualified name of Service class. Mandatory if dependency exists
        <name> - name of local Action's variable which need to be initialized by
        Service object value. Mandatory if dependency exists
     <validate> - true if Action needed html-form data. Optional
     <formName> - mapping to form. Optional
     <input> - URL path to html-form. Optional
     -->
    <action-mappings>
        <action>
            <path>/slotSearch</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowSlotSearchPageAction</type>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/slotSearch.do</path>
            <type>com.saloon.beauty.web.controllers.actions.SlotSearchAction</type>
            <form-name>slotSearchForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/slotSearch.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.SlotService</class>
                    <name>slotService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/changeLanguage</path>
            <type>com.saloon.beauty.web.controllers.actions.ChangeLanguageAction</type>
        </action>
        <action>
            <path>/error</path>
            <type>com.saloon.beauty.web.controllers.actions.ErrorLoggingAction</type>
        </action>
        <action>
            <path>/login.do</path>
            <type>com.saloon.beauty.web.controllers.actions.LoginAction</type>
            <form-name>userLoginForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/login.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/logout</path>
            <type>com.saloon.beauty.web.controllers.actions.LogoutAction</type>
        </action>
        <action>
            <path>/register.do</path>
            <type>com.saloon.beauty.web.controllers.actions.RegisterUserAction</type>
            <form-name>userRegistrationForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/registration.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/cabinet</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowPersonalCabinetAction</type>
        </action>
        <action>
            <path>/user/signedUpSlots</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowSignedUpSlotsAction</type>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.SlotService</class>
                    <name>slotService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/user/addFeedback</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowAddFeedbackPage</type>
            <form-name>AddFeedbackForm</form-name>
            <validate>false</validate>
            <input>/WEB-INF/jsp/userSignedUpSlots.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.FeedbackService</class>
                    <name>feedbackService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/user/addFeedback.do</path>
            <type>com.saloon.beauty.web.controllers.actions.AddFeedbackAction</type>
            <form-name>AddFeedbackForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/addFeedback.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.FeedbackService</class>
                    <name>feedbackService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/userProfile</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowUserProfileAction</type>
            <form-name>UserProfileForm</form-name>
            <validate>false</validate>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/user/signUpSlot.do</path>
            <type>com.saloon.beauty.web.controllers.actions.SignUpSlotAction</type>
            <form-name>signUpSlotForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/slotSearch.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.SlotService</class>
                    <name>slotService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/user/cancelSignedUpSlot.do</path>
            <type>com.saloon.beauty.web.controllers.actions.CancelSignUpSlotAction</type>
            <form-name>signUpSlotForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/userSignedUpSlots.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.SlotService</class>
                    <name>slotService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/master/masterSlots</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowMastersSlotsAction</type>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.SlotService</class>
                    <name>slotService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/master/masterFeedback</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowMasterFeedbackAction</type>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.SlotService</class>
                    <name>slotService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/feedbackSearch</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowFeedbackSearchPageAction</type>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/feedbackSearch.do</path>
            <type>com.saloon.beauty.web.controllers.actions.FeedbackSearchAction</type>
            <form-name>feedbackSearchForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/feedbackSearch.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.SlotService</class>
                    <name>slotService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/slotManagement/searchSlots</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowSlotSearchAdminPageAction</type>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/slotManagement/searchSlots.do</path>
            <type>com.saloon.beauty.web.controllers.actions.SlotSearchAdminAction</type>
            <form-name>slotSearchForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/slotSearch.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.SlotService</class>
                    <name>slotService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/slotManagement/addSlot</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowAddSlotPageAction</type>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/slotManagement/addSlot.do</path>
            <type>com.saloon.beauty.web.controllers.actions.AddSlotAction</type>
            <form-name>slotForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/addSlot.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.SlotService</class>
                    <name>slotService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/slotManagement/updateSlot</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowUpdateSlotPageAction</type>
            <form-name>slotIdForm</form-name>
            <validate>true</validate>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
                <dependency>
                    <class>com.saloon.beauty.services.SlotService</class>
                    <name>slotService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/slotManagement/updateSlot.do</path>
            <type>com.saloon.beauty.web.controllers.actions.UpdateSlotAction</type>
            <form-name>slotUpdateForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/updateSlot.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.SlotService</class>
                    <name>slotService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/procedureManagement/procedures</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowProcedurePageAction</type>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/procedureManagement/addProcedure.do</path>
            <type>com.saloon.beauty.web.controllers.actions.AddProcedureAction</type>
            <form-name>addProcedureForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/addProcedure.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/procedureManagement/updateProcedure</path>
            <type>com.saloon.beauty.web.controllers.actions.ShowUpdateProcedurePageAction</type>
            <form-name>procedureIdForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/proceduresPage.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/procedureManagement/updateProcedure.do</path>
            <type>com.saloon.beauty.web.controllers.actions.UpdateProcedureAction</type>
            <form-name>updateProcedureForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/updateProcedure.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.ProcedureService</class>
                    <name>procedureService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/userManagement/searchUser.do</path>
            <type>com.saloon.beauty.web.controllers.actions.UserSearchAction</type>
            <form-name>userSearchForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/userSearch.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
        <action>
            <path>/admin/userManagement/addUser.do</path>
            <type>com.saloon.beauty.web.controllers.actions.AddUserAction</type>
            <form-name>addUserForm</form-name>
            <validate>true</validate>
            <input>/WEB-INF/jsp/addUser.jsp</input>
            <service-dependencies>
                <dependency>
                    <class>com.saloon.beauty.services.UserService</class>
                    <name>userService</name>
                </dependency>
            </service-dependencies>
        </action>
    </action-mappings>


    <!--
    Mapping between web page files and its names.
    <entry> - one mapping
        <key> - web page's name
        <value> - web page's file
    -->
    <forwards>
        <entry>
            <key>/</key>
            <value>/WEB-INF/jsp/titlePage.jsp</value>
        </entry>
        <entry>
            <key>/title</key>
            <value>/WEB-INF/jsp/titlePage.jsp</value>
        </entry>
        <entry>
            <key>ShowTitlePage</key>
            <value>/WEB-INF/jsp/titlePage.jsp</value>
        </entry>
        <entry>
            <key>ShowSlotSearchPage</key>
            <value>/WEB-INF/jsp/slotSearch.jsp</value>
        </entry>
        <entry>
            <key>/login</key>
            <value>/WEB-INF/jsp/login.jsp</value>
        </entry>
        <entry>
            <key>ShowLoginPage</key>
            <value>/WEB-INF/jsp/login.jsp</value>
        </entry>
        <entry>
            <key>/registration</key>
            <value>/WEB-INF/jsp/registration.jsp</value>
        </entry>
        <entry>
            <key>ShowRegistrationPage</key>
            <value>/WEB-INF/jsp/registration.jsp</value>
        </entry>
        <entry>
            <key>ShowAdminCabinetPage</key>
            <value>/WEB-INF/jsp/adminCabinet.jsp</value>
        </entry>
        <entry>
            <key>ShowUserCabinetPage</key>
            <value>/WEB-INF/jsp/userCabinet.jsp</value>
        </entry>
        <entry>
            <key>ShowMasterCabinetPage</key>
            <value>/WEB-INF/jsp/masterCabinet.jsp</value>
        </entry>
        <entry>
            <key>ShowPersonalCabinetAction</key>
            <value>/cabinet</value>
        </entry>
        <entry>
            <key>showUserProfilePage</key>
            <value>/WEB-INF/jsp/userProfile.jsp</value>
        </entry>
        <entry>
            <key>ShowAccessDeniedPage</key>
            <value>/WEB-INF/jsp/accessDenied.jsp</value>
        </entry>
        <entry>
            <key>showErrorPage</key>
            <value>/WEB-INF/jsp/error.jsp</value>
        </entry>
        <entry>
            <key>ShowSignedUpSlotsAction</key>
            <value>/user/signedUpSlots</value>
        </entry>
        <entry>
            <key>ShowSignedUpSlotsPage</key>
            <value>/WEB-INF/jsp/userSignedUpSlots.jsp</value>
        </entry>
        <entry>
            <key>ShowMasterSlotsAction</key>
            <value>/master/masterSlots</value>
        </entry>
        <entry>
            <key>ShowMasterSlotsPage</key>
            <value>/WEB-INF/jsp/masterSlots.jsp</value>
        </entry>
        <entry>
            <key>ShowAddingFeedbackPage</key>
            <value>/WEB-INF/jsp/addFeedback.jsp</value>
        </entry>
        <entry>
            <key>ShowMasterFeedbackPage</key>
            <value>/WEB-INF/jsp/masterFeedback.jsp</value>
        </entry>
        <entry>
            <key>ShowMasterFeedbackAction</key>
            <value>/master/masterFeedback</value>
        </entry>
        <entry>
            <key>ShowFeedbackSearchPage</key>
            <value>/WEB-INF/jsp/feedbackSearch.jsp</value>
        </entry>
        <entry>
            <key>/admin/slotManagement</key>
            <value>/WEB-INF/jsp/slotsManagement.jsp</value>
        </entry>
        <entry>
            <key>ShowSlotSearchAdminPage</key>
            <value>/WEB-INF/jsp/adminSlotSearch.jsp</value>
        </entry>
        <entry>
            <key>ShowSlotAddPage</key>
            <value>/WEB-INF/jsp/addSlot.jsp</value>
        </entry>
        <entry>
            <key>ShowSlotUpdatePage</key>
            <value>/WEB-INF/jsp/updateSlot.jsp</value>
        </entry>
        <entry>
            <key>ShowProceduresPage</key>
            <value>/WEB-INF/jsp/proceduresPage.jsp</value>
        </entry>
        <entry>
            <key>ShowProceduresAction</key>
            <value>/admin/procedureManagement/procedures</value>
        </entry>
        <entry>
            <key>/admin/procedureManagement</key>
            <value>/WEB-INF/jsp/proceduresManagement.jsp</value>
        </entry>
        <entry>
            <key>/admin/procedureManagement/addProcedure</key>
            <value>/WEB-INF/jsp/addProcedure.jsp</value>
        </entry>
        <entry>
            <key>ShowProcedureUpdatePage</key>
            <value>/WEB-INF/jsp/updateProcedure.jsp</value>
        </entry>
        <entry>
            <key>/admin/userManagement/userSearch</key>
            <value>/WEB-INF/jsp/userSearch.jsp</value>
        </entry>
        <entry>
            <key>ShowUserSearchPage</key>
            <value>/WEB-INF/jsp/userSearch.jsp</value>
        </entry>
        <entry>
            <key>/admin/userManagement</key>
            <value>/WEB-INF/jsp/usersManagement.jsp</value>
        </entry>
        <entry>
            <key>/admin/userManagement/addUser</key>
            <value>/WEB-INF/jsp/addUser.jsp</value>
        </entry>
    </forwards>

    <!--
    Contains mapping between constrained resources URL and
    authorized for them roles.
    <resource> - constrained resource
        <url-pattern> - URL pattern to constrained resource
        <role> - role which authorized for visiting
        constrained resource
    -->
    <security-constraint>
        <resource>
            <url-pattern>/user</url-pattern>
            <allowed-roles>
                <role>USER</role>
            </allowed-roles>
        </resource>
        <resource>
            <url-pattern>/admin</url-pattern>
            <allowed-roles>
                <role>ADMINISTRATOR</role>
            </allowed-roles>
        </resource>
        <resource>
            <url-pattern>/master</url-pattern>
            <allowed-roles>
                <role>MASTER</role>
            </allowed-roles>
        </resource>
        <resource>
            <url-pattern>/cabinet</url-pattern>
            <allowed-roles>
                <role>ADMINISTRATOR</role>
                <role>USER</role>
                <role>MASTER</role>
            </allowed-roles>
        </resource>
        <resource>
            <url-pattern>/userProfile</url-pattern>
            <allowed-roles>
                <role>ADMINISTRATOR</role>
                <role>USER</role>
                <role>MASTER</role>
            </allowed-roles>
        </resource>
    </security-constraint>

</servlet-config>
